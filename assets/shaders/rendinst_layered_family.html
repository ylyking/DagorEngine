<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Shader Family: rendinst_layered &mdash; Dagor Documentation  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster.custom.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster.bundle.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-shadow.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-punk.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-noir.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-light.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-borderless.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/micromodal.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/sphinx_rtd_theme.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />

  
    <link rel="shortcut icon" href="../../_static/gaijin.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/js/hoverxref.js"></script>
        <script src="../../_static/js/tooltipster.bundle.min.js"></script>
        <script src="../../_static/js/micromodal.min.js"></script>
        <script src="../../_static/js/versionwarning.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script src="../../_static/design-tabs.js"></script>
        <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Shader Family: land_mesh_combined_decal" href="land_mesh_combined_decal_family.html" />
    <link rel="prev" title="Shader: simple_aces_detailed" href="simple_aces_detailed.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Dagor Documentation
              <img src="../../_static/gaijin_round_blur.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../dagor-home/index.html">Dagor Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.html">Getting Started with Dagor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials and Manuals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api-references/index.html">API References and Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../samples/index.html">Samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dagor-tools/index.html">Dagor Tools</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Assets and Assets Management</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../about-assets/index.html">Assets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../all-about-blk/index.html">All about .blk</a></li>
<li class="toctree-l2"><a class="reference internal" href="../animations/index.html">Animations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lighting/index.html">Lighting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../materials/index.html">Materials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Shaders</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="rendinst_interior_mapping.html">Shader: rendinst_interior_mapping</a></li>
<li class="toctree-l3"><a class="reference internal" href="rendinst_layered.html">Shader: rendinst_layered</a></li>
<li class="toctree-l3"><a class="reference internal" href="rendinst_layered_lightmap.html">Shader: rendinst_layered_lightmap</a></li>
<li class="toctree-l3"><a class="reference internal" href="rendinst_parallax_ice.html">Shader: rendinst_parallax_ice</a></li>
<li class="toctree-l3"><a class="reference internal" href="rendinst_perlin_layered.html">Shader: rendinst_perlin_layered</a></li>
<li class="toctree-l3"><a class="reference internal" href="rendinst_simple_emissive.html">Shader: rendinst_simple_emissive</a></li>
<li class="toctree-l3"><a class="reference internal" href="simple_aces_detailed.html">Shader: simple_aces_detailed</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Shader Family: rendinst_layered</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rendinst-layered">rendinst_layered</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dynamic-layered">dynamic_layered</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rendinst-layered-atest">rendinst_layered_atest</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#parameters">Parameters</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#rendinst-layered-lightmap">rendinst_layered_lightmap</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rendinst-layered-hmap-blend">rendinst_layered_hmap_blend</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id1">Parameters</a></li>
<li class="toctree-l5"><a class="reference internal" href="#salt-sediments">Salt Sediments</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="land_mesh_combined_decal_family.html">Shader Family: land_mesh_combined_decal</a></li>
<li class="toctree-l3"><a class="reference internal" href="dng-shaders/index.html">daNetGame-Based Shaders</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../danetgame-framework/index.html">DaNetGame Framework</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Dagor Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Assets and Assets Management</a></li>
          <li class="breadcrumb-item"><a href="index.html">Shaders</a></li>
      <li class="breadcrumb-item active">Shader Family: rendinst_layered</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/assets/shaders/rendinst_layered_family.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="shader-family-rendinst-layered">
<h1>Shader Family: rendinst_layered<a class="headerlink" href="#shader-family-rendinst-layered" title="Permalink to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>As of writing, the <code class="docutils literal notranslate"><span class="pre">rendinst_layered</span></code> family includes four shaders:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#rendinst-layered"><code class="docutils literal notranslate"><span class="pre">rendinst_layered</span></code></a>: The foundational shader of the
family.</p></li>
<li><p><a class="reference internal" href="#dynamic-layered"><code class="docutils literal notranslate"><span class="pre">dynamic_layered</span></code></a>: A dynamic version designed for destrs.</p></li>
<li><p><a class="reference internal" href="#rendinst-layered-atest"><code class="docutils literal notranslate"><span class="pre">rendinst_layered_atest</span></code></a>: A version that
supports alpha test for detail textures.</p></li>
<li><p><a class="reference internal" href="#rendinst-layered-hmap-blend"><code class="docutils literal notranslate"><span class="pre">rendinst_layered_hmap_blend</span></code></a>: A version
that includes heightmap blending functionality.</p></li>
</ul>
<p>Let’s examine the parameters for each shader.</p>
</section>
<section id="rendinst-layered">
<h2>rendinst_layered<a class="headerlink" href="#rendinst-layered" title="Permalink to this heading"></a></h2>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>For more information, see <a class="reference internal" href="rendinst_layered.html"><span class="std std-doc">rendinst_layered</span></a> shader.</p>
</div>
</section>
<section id="dynamic-layered">
<h2>dynamic_layered<a class="headerlink" href="#dynamic-layered" title="Permalink to this heading"></a></h2>
<p>This shader functions similarly to <code class="docutils literal notranslate"><span class="pre">rendinst_layered</span></code>, but it is optimized for
dynamic objects (destrs).</p>
</section>
<section id="rendinst-layered-atest">
<h2>rendinst_layered_atest<a class="headerlink" href="#rendinst-layered-atest" title="Permalink to this heading"></a></h2>
<p>This version supports alpha test for one or both detail textures.</p>
<section id="parameters">
<h3>Parameters<a class="headerlink" href="#parameters" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">blended_atest</span></code>: 0/1 (disabled/enabled)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">detail1_atest_weight</span></code>: Alpha test level for the first detail texture
(default: 127)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">detail2_atest_weight</span></code>: Alpha test level for the second detail texture
(default: 127)</p></li>
</ul>
</section>
</section>
<section id="rendinst-layered-lightmap">
<h2>rendinst_layered_lightmap<a class="headerlink" href="#rendinst-layered-lightmap" title="Permalink to this heading"></a></h2>
<p>This is the standard <code class="docutils literal notranslate"><span class="pre">rendinst_layered</span></code> shader with added support for emissive
maps.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>For more information, see
<a class="reference internal" href="rendinst_layered_lightmap.html"><span class="std std-doc">rendinst_layered_lightmap</span></a> shader.</p>
</div>
</section>
<section id="rendinst-layered-hmap-blend">
<h2>rendinst_layered_hmap_blend<a class="headerlink" href="#rendinst-layered-hmap-blend" title="Permalink to this heading"></a></h2>
<p>This version introduces a heightmap blend feature that allows seamless
transitions between the model and the terrain. It also supports projecting a
clipmap using top-down projection onto the model. The clipmap is blended into
the material in two layers: the first blends from the ground up to a specified
height, and the second applies a Perlin noise mask on horizontal surfaces with
positive normals, also modifiable by distance from the ground.</p>
<p>This shader is ideal for objects like rocks, cliffs, and debris piles that need
to blend into the terrain or hide seams with the ground.</p>
<p>Below are screenshots illustrating the effect:</p>
<table style="text-align:center; width:98%"><tr>
  <th style="text-align:center; width:49%"><p>Without heightmap blend</p></th>
  <th style="text-align:center; width:49%"><p>With heightmap blend</p></th></tr>
</table>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_layered_family_01.jpg"><img alt="../../_images/rendinst_layered_family_01.jpg" class="bg-primary" src="../../_images/rendinst_layered_family_01.jpg" style="width: 49%;" /></a>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_layered_family_02.jpg"><img alt="../../_images/rendinst_layered_family_02.jpg" class="bg-primary" src="../../_images/rendinst_layered_family_02.jpg" style="width: 49%;" /></a>
<table style="text-align:center; width:98%"><tr>
  <th style="text-align:center; width:49%"><p>Without clipmap projection</p></th>
  <th style="text-align:center; width:49%"><p>With clipmap projection</p></th></tr>
</table>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_layered_family_03.jpg"><img alt="../../_images/rendinst_layered_family_03.jpg" class="bg-primary" src="../../_images/rendinst_layered_family_03.jpg" style="width: 49%;" /></a>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_layered_family_04.jpg"><img alt="../../_images/rendinst_layered_family_04.jpg" class="bg-primary" src="../../_images/rendinst_layered_family_04.jpg" style="width: 49%;" /></a>
<section id="id1">
<h3>Parameters<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">hmp_blend_height</span></code> parameter is deprecated! If you encounter it, please
remove it.</p>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">land_blend_dist</span></code>: Specifies the height (in meters) for the first layer of
clipmap blending, from the ground up. Default is 0.3 meters if not specified.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">land_perlin_height</span></code>: Specifies the maximum height (in meters) for the
second layer of clipmap projection, which uses Perlin noise and applies to
horizontal surfaces with positive normals.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">land_perlin_scale</span></code>: Controls the scale of the Perlin noise. A lower value
results in coarser noise. Start with a value of 0.2 for tuning.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">land_perlin_blend</span></code>: Defines the range (in meters) over which the Perlin
noise fades from 1 to 0, starting from the <code class="docutils literal notranslate"><span class="pre">land_blend_perlin_height</span></code>
parameter. For example, if <code class="docutils literal notranslate"><span class="pre">land_blend_perlin_height</span></code> is set to 20 meters and
you want the Perlin noise to begin fading 1 meter above the ground, set
<code class="docutils literal notranslate"><span class="pre">land_blend_perlin_blend</span></code> to 19.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">land_blend_normal_start</span></code>: The normal value at which the clipmap
projection begins. Default is 1. A value greater than 1 reduces the opacity on
perfectly horizontal surfaces.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">land_blend_normal_end</span></code>: The normal value at which the clipmap projection
ends. Default is 0.5.</p></li>
</ul>
<p>Below is an illustration showing how the Perlin noise strength gradient operates
from <code class="docutils literal notranslate"><span class="pre">land_blend_perlin_height</span></code> (upper bound) to <code class="docutils literal notranslate"><span class="pre">land_blend_perlin_blend</span></code>
(lower bound):</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_layered_family_05.jpg"><img alt="../../_images/rendinst_layered_family_05.jpg" class="bg-primary align-center" src="../../_images/rendinst_layered_family_05.jpg" style="width: 50%;" /></a>
<br>
</section>
<section id="salt-sediments">
<h3>Salt Sediments<a class="headerlink" href="#salt-sediments" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">rendinst_layered_hmap_blend</span></code> shader is often used on rocks and cliffs. It
includes a feature called Salt Sediments, which simulates effects like waterline
marks, rust, or algae growth. This effect is illustrated below:</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_layered_family_06.jpg"><img alt="../../_images/rendinst_layered_family_06.jpg" class="bg-primary align-center" src="../../_images/rendinst_layered_family_06.jpg" style="width: 80%;" /></a>
<br>
<p>In the example above, the following texture was used:</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_layered_family_07.jpg"><img alt="../../_images/rendinst_layered_family_07.jpg" class="bg-primary align-center" src="../../_images/rendinst_layered_family_07.jpg" style="width: 3%;" /></a>
<br>
<p>This texture has an alpha channel that controls transparency. It replaces the
combined albedo of the first detail texture and overlay.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It only affects the first detail texture.</p>
</div>
<p>In the example, the effect is visible on the stone, but the orange moss (the
second detail texture) remains unchanged.</p>
<p>The texture is subtracted using the AlbedoAO of the overlay and stretches
infinitely downward below the water level. If this effect is unwanted, make the
bottom two lines of pixels in the texture fully transparent.</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_layered_family_08.jpg"><img alt="../../_images/rendinst_layered_family_08.jpg" class="bg-primary align-center" src="../../_images/rendinst_layered_family_08.jpg" style="width: 80%;" /></a>
<br>
<p><strong>Parameters:</strong></p>
<p>In <code class="docutils literal notranslate"><span class="pre">level.blk</span></code>, set the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">saltSedimentsStart:r=-0.25</span></code>: Starting height for the sediment effect.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">saltSedimentsEnd:r=4</span></code>: Ending height for the sediment effect.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">saltSedimentsTile:r=15</span></code>: Horizontal tiling scale for the texture, in
meters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">saltSedimentsTex:t=&quot;waterline_grdnt_a_tex_d&quot;</span></code>: Name of the projected
texture.</p></li>
</ul>
<p>The shader also supports an optional command:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;salt_sediments_opacity=1&quot;</span></code>: Controls the multiplier for the
texture’s alpha channel. You can use other values, but it’s generally
unnecessary.</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="simple_aces_detailed.html" class="btn btn-neutral float-left" title="Shader: simple_aces_detailed" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="land_mesh_combined_decal_family.html" class="btn btn-neutral float-right" title="Shader Family: land_mesh_combined_decal" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Gaijin Entertainment 2024.
      <span class="lastupdated">Last updated on Dec 31, 2024.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>