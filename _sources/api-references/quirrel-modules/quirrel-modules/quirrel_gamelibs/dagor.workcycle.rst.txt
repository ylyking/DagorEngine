.. autogenerated

***************
dagor.workcycle
***************

module 'dagor.workcycle'



*Source file: prog/gameLibs/quirrel/bindQuirrelEx/dagorWorkCycle.cpp*

Usage::

  let { defer, deferOnce, setTimeout, resetTimeout, setInterval, clearTimer } = require("dagor.workcycle")

or::

  from "dagor.workcycle" import *

.. code-block:: sq

  //'dagor.workcycle' exports:
  {
    function defer(arg0): closure_and_nativeclosure -> _undocumented_
    function deferOnce(arg0): closure_and_nativeclosure -> _undocumented_
    function setTimeout(time_in_seconds, func, id = null): integer_or_float, closure_and_nativeclosure, any_type -> _undocumented_
    function resetTimeout(time_in_seconds, func, id = null): integer_or_float, closure_and_nativeclosure, any_type -> _undocumented_
    function setInterval(period_in_seconds, func, id = null): integer_or_float, closure_and_nativeclosure, any_type -> _undocumented_
    function clearTimer(&id_): sqObject -> null
  }
  

.. sq:function:: function defer(arg0)

  :param arg0: autodoc from typemask/paramscheck
  :type arg0: closure_and_nativeclosure

  ``nparamscheck:2``

  ``typecheck mask: any_type, closure_and_nativeclosure``

.. sq:function:: function deferOnce(arg0)

  :param arg0: autodoc from typemask/paramscheck
  :type arg0: closure_and_nativeclosure

  ``nparamscheck:2``

  ``typecheck mask: any_type, closure_and_nativeclosure``



.. sq:function:: function setTimeout(time_in_seconds, func, id = null)

  :param time_in_seconds: time in seconds on which function would be called
  :type time_in_seconds: integer_or_float

  :param func: function to be called on time
  :type func: closure_and_nativeclosure

  :param id: optional id of timer. If not provided closure 'func' is used as id
  :type id: any_type





.. sq:function:: function resetTimeout(time_in_seconds, func, id = null)

  :param time_in_seconds: time in seconds on which function would be called
  :type time_in_seconds: integer_or_float

  :param func: function to be called on time
  :type func: closure_and_nativeclosure

  :param id: optional id of timer. If not provided closure 'func' is used as id
  :type id: any_type





.. sq:function:: function setInterval(period_in_seconds, func, id = null)

  :param period_in_seconds: period of time in seconds on which function would be called
  :type period_in_seconds: integer_or_float

  :param func: function to be called on time
  :type func: closure_and_nativeclosure

  :param id: optional id of timer. If not provided closure 'func' is used as id
  :type id: any_type




.. sq:function:: function clearTimer(&id_)

  :param &id_:  
  :type &id_: sqObject

  :return: null

/;

  module_mgr->addNativeModule("dagor.workcycle", nsTbl);

  eastl::string vmNameStr((vm_name && *vm_name) ? vm_name : "<unknown>");
  run_action_on_main_thread([vm, au = auto_update_from_idle_cycle, name = vmNameStr] {
    VmData &v = vms[vm];
    v.autoUpdateFromIdleCycle = au;
    v.name = name;
  });
}

void clear_workcycle_actions(HSQUIRRELVM vm)
{
  auto it = vms.find(vm);
  if (it != vms.end())
  {
    it->second.timers.clear();
    it->second.deferredCalls.clear();
  }
}

void cleanup_dagor_workcycle_module(HSQUIRRELVM vm) { vms.erase(vm); }

} // namespace bindquirrel


